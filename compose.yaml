services:
  MapTilesDownloader:
    image: ghcr.io/pcs3rd/map-tile-downloader:master
    ports:  #Host Port:Container Port
      - 5000:5000
    volumes:
      - ${host-directory}/mtd/config:/config
      - ${host-directory}/mtd/downloads:/downloads
      - ${host-directory}/mtd/tile-cache:/tile-cache
    labels:                                                                              # Optional if accessing directly via port
      - "traefik.enable=true"                                                            # Enable/Disable Traefik
      - "traefik.http.routers.MapTilesDownloader.rule=Host(`mtd.stickpile.net`)"             # Access domain
      - "traefik.http.routers.MapTilesDownloader.entrypoints=websecure"                  # Use HTTPS
      - "traefik.http.routers.MapTilesDownloader.tls.certresolver=httpsResolve"          # HTTPS Cert Resolver
      - "traefik.http.services.MapTilesDownloader.loadbalancer.server.port=5000"         # Container Port
      - "traefik.http.routers.MapTilesDownloader.middlewares=middlewares-authentik@file" # If you're using authentik